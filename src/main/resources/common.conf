akka {
  loglevel = DEBUG
  actor {
    provider = "cluster"
    serialization-bindings {
      "com.sblendor.domain.CborSerializable" = jackson-cbor
    }
  }

  cluster {
    seed-nodes = [
      "akka://Sblendor@127.0.0.1:25251",
      "akka://Sblendor@127.0.0.1:25252"
    ]
    downing-provider-class = "akka.cluster.sbr.SplitBrainResolverProvider"
  }

  persistence {
    cassandra {
      journal {
        class = "akka.persistence.cassandra.journal.CassandraJournal"
        keyspace-autocreate = true
        tables-autocreate = true
      }
      snapshot {
        class = "akka.persistence.cassandra.journal.CassandraJournal"
        keyspace-autocreate = true
        tables-autocreate = true
      }
      query {
        refresh-interval = 2s
      }
      events-by-tag {
        eventual-consistency-delay = 25ms
        flush-interval = 25ms
        pubsub-notification = on
      }
    }
    journal {
      plugin = "akka.persistence.cassandra.journal"
      auto-start-journals = ["akka.persistence.cassandra.journal"]
    }
    snapshot-store.plugin = "akka.persistence.cassandra.snapshot"
  }
}

#For Cassandra profile
datastax-java-driver {
  advanced.reconnect-on-init = true
  profiles {
    akka-persistence-cassandra-profile {
      basic.request {
        consistency = QUORUM
        default-idempotence = true
      }
    }
    akka-persistence-cassandra-snapshot-profile {
      basic.request {
        consistency = QUORUM
        default-idempotence = true
      }
    }
  }
}

sblendor {
  routes.ask-timeout = 60s
}

